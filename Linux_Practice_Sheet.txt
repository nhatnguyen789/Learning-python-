# Embedded Test Engineer - Linux Practice Sheet

## Má»¥c tiÃªu:
LÃ m quen vá»›i lá»‡nh Linux, shell scripting vÃ  cÃ´ng cá»¥ phÃ¢n tÃ­ch hiá»‡u nÄƒng.

---
BÃ i táº­p 1. Basic Linux Commands
- Liá»‡t kÃª táº¥t cáº£ cÃ¡c file `.c` trong thÆ° má»¥c hiá»‡n táº¡i.
- Äáº¿m sá»‘ dÃ²ng trong táº¥t cáº£ file `.log`.
- TÃ¬m táº¥t cáº£ file chá»©a chuá»—i "ERROR" trong `/var/log/`.
Answer:
a) Liá»‡t kÃª: 
- ÄÃ¢y lÃ  cÃ¡ch Ä‘Æ¡n giáº£n vÃ  Ä‘Ãºng Ä‘á»ƒ liá»‡t kÃª file .c trong thÆ° má»¥c hiá»‡n táº¡i.
	$ ls *.c
ğŸ“Œ Gá»£i Ã½ thÃªm:
- Náº¿u muá»‘n liá»‡t kÃª kÃ¨m chi tiáº¿t (thá»i gian, quyá»n, dung lÆ°á»£ng):
	$ ls -l *.c
- Náº¿u muá»‘n tÃ¬m má»i file .c trong thÆ° má»¥c hiá»‡n táº¡i vÃ  thÆ° má»¥c con, dÃ¹ng:
	$ find . -name "*.c"
b) - Äáº¿m sá»‘ dÃ²ng trong táº¥t cáº£ file .log
	$ cat *.log | wc -l
- Hoáº·c náº¿u cÃ³ nhiá»u file, hoáº·c cáº§n an toÃ n vá»›i tÃªn file chá»©a khoáº£ng tráº¯ng:
	$ find . -name "*.log" -exec cat {} + | wc -l
c) TÃ¬m táº¥t cáº£ file chá»©a chuá»—i "ERROR" trong /var/log/
	$grep -r "ERROR" /var/log
- Giáº£i thÃ­ch:
-r: tÃ¬m Ä‘á»‡ quy trong táº¥t cáº£ thÆ° má»¥c con
/var/log: lÃ  Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i
Náº¿u báº¡n Ä‘ang á»Ÿ thÆ° má»¥c /, var/log cÅ©ng Ä‘Ãºng â€” nhÆ°ng nÃªn dÃ¹ng /var/log Ä‘á»ƒ rÃµ rÃ ng
ğŸ“Œ Gá»£i Ã½ thÃªm:
Äá»ƒ chá»‰ hiá»ƒn thá»‹ tÃªn file chá»©a chuá»—i, dÃ¹ng:
	$ grep -rl "ERROR" /var/log
-------------------------------------------------------
***Kiáº¿n thá»©c:
ğŸ“Œ grep lÃ  viáº¿t táº¯t cá»§a gÃ¬?
- grep viáº¿t táº¯t tá»«:
	"globally regular expression print"
NghÄ©a lÃ :
ğŸ” In ra cÃ¡c dÃ²ng khá»›p vá»›i biá»ƒu thá»©c chÃ­nh quy trÃªn toÃ n bá»™ tá»‡p hoáº·c dÃ²ng dá»¯ liá»‡u.
Báº¡n cÃ³ thá»ƒ nghÄ© grep nhÆ° lÃ :
âœ… CÃ´ng dá»¥ng chÃ­nh cá»§a grep lÃ  gÃ¬?
grep dÃ¹ng Ä‘á»ƒ:
- TÃ¬m kiáº¿m dÃ²ng chá»©a má»™t chuá»—i cá»¥ thá»ƒ trong file hoáº·c output
- CÃ³ thá»ƒ dÃ¹ng biá»ƒu thá»©c chÃ­nh quy Ä‘á»ƒ tÃ¬m nÃ¢ng cao hÆ¡n
- Há»¯u Ã­ch trong viá»‡c phÃ¢n tÃ­ch log, test output, tÃ¬m lá»—i

*** â€œTÃ´i muá»‘n tÃ¬m dÃ²ng nÃ o cÃ³ tá»« nÃ y, trong file kia, cÃ ng nhanh cÃ ng tá»‘t!â€ ***

ğŸ“Œ Máº¹o Ä‘á»ƒ dá»… nhá»›:
Lá»‡nh grep giá»‘ng nhÆ° 		| Ghi nhá»› tháº¿ nÃ y
Má»™t cÃ¡i mÃ¡y dÃ² tÃ¬m chuá»—i 	| grep = grab (náº¯m báº¯t chuá»—i)
Lá»c log hoáº·c Ä‘áº§u ra 		| grep = get results precisely
Ráº¥t há»£p vá»›i pipe (` 		| `)

ğŸ“ GREP CHEAT SHEET â€“ TÃŒM KIáº¾M CHUá»–I TRONG LINUX
CÃ¢u lá»‡nh				Ã nghÄ©a
grep "hello" file.txt			TÃ¬m dÃ²ng chá»©a "hello" trong file file.txt
grep -i "hello" file.txt		TÃ¬m "hello" khÃ´ng phÃ¢n biá»‡t chá»¯ hoa/thÆ°á»ng
grep -r "error" /var/log		TÃ¬m Ä‘á»‡ quy tá»« /var/log, táº¥t cáº£ file con
grep -rl "ERROR" .			Chá»‰ in tÃªn file chá»©a "ERROR" trong thÆ° má»¥c hiá»‡n táº¡i
grep -n "FAIL" results.txt		Hiá»ƒn thá»‹ sá»‘ dÃ²ng nÆ¡i xuáº¥t hiá»‡n "FAIL"
grep -v "PASS" log.txt			In ra táº¥t cáº£ dÃ²ng khÃ´ng chá»©a "PASS"
grep -c "error" log.txt			Äáº¿m sá»‘ dÃ²ng chá»©a "error" trong log.txt
`ps aux					grep firefox`
`dmesg					grep -i usb`
`cat file.txt				grep "^A"`
grep "abc$" file.txt			TÃ¬m dÃ²ng káº¿t thÃºc báº±ng "abc"


ğŸ“˜ Má»™t sá»‘ flag thÆ°á»ng gáº·p cá»§a grep:
Flag 			| Ã nghÄ©a
-i 			| KhÃ´ng phÃ¢n biá»‡t chá»¯ hoa/thÆ°á»ng
-r hoáº·c -R 		| Duyá»‡t Ä‘á»‡ quy qua thÆ° má»¥c
-l 			| Chá»‰ in ra tÃªn file chá»©a chuá»—i tÃ¬m
-n 			| In sá»‘ dÃ²ng
-v 			| In cÃ¡c dÃ²ng khÃ´ng khá»›p
-c 			| Äáº¿m sá»‘ dÃ²ng khá»›p
-E 			| Cho phÃ©p dÃ¹ng biá»ƒu thá»©c chÃ­nh quy má»Ÿ rá»™ng

ğŸ” Bonus â€“ Biá»ƒu thá»©c chÃ­nh quy thÆ°á»ng dÃ¹ng:
Biá»ƒu thá»©c 		| Ã nghÄ©a
^abc 			| DÃ²ng báº¯t Ä‘áº§u báº±ng "abc"
xyz$ 			| DÃ²ng káº¿t thÃºc báº±ng "xyz"
[0-9] 			| Báº¥t ká»³ sá»‘ nÃ o tá»« 0 Ä‘áº¿n 9
[A-Za-z] 		| Báº¥t ká»³ kÃ½ tá»± chá»¯ cÃ¡i
. 			| Äáº¡i diá»‡n cho báº¥t ká»³ kÃ½ tá»± nÃ o
* 			| Láº·p láº¡i 0 hoáº·c nhiá»u láº§n
\. 			| Dáº¥u cháº¥m tháº­t (escape kÃ½ tá»± Ä‘áº·c biá»‡t)

ğŸ“‚ Máº¹o há»c nhanh:
ğŸ‘‰ grep = "tÃ¬m cÃ¡i mÃ¬nh cáº§n trong Ä‘á»‘ng dá»¯ liá»‡u"
ğŸ‘‰ GhÃ©p grep vá»›i cat, dmesg, ps, ls, journalctl... cá»±c ká»³ máº¡nh!

ğŸ“˜ VÃ­ dá»¥ dá»… nhá»›:
ğŸ” TÃ¬m dÃ²ng chá»©a "ERROR" trong file log:
$ grep "ERROR" system.log

ğŸ” TÃ¬m táº¥t cáº£ file cÃ³ chá»©a "FAIL" trong thÆ° má»¥c hiá»‡n táº¡i (vÃ  thÆ° má»¥c con):
$ grep -rl "FAIL" .

ğŸ” TÃ¬m dÃ²ng chá»©a sá»‘ Ä‘iá»‡n thoáº¡i (biá»ƒu thá»©c chÃ­nh quy):
grep -E "[0-9]{3}-[0-9]{3}-[0-9]{4}" contacts.txt


-------------------------------------------------------

BÃ i táº­p 2. Shell Scripting
- Viáº¿t script in "Hello" má»—i 2 giÃ¢y, láº·p láº¡i 5 láº§n.
- Viáº¿t script Ä‘áº¿m sá»‘ file `.txt` trong thÆ° má»¥c.

Answer:
Script (hello_loop.sh):
#!/usr/bin/env bash

# Sá»‘ láº§n láº·p
count=5
# Khoáº£ng nghá»‰ giá»¯a cÃ¡c láº§n in (giÃ¢y)
interval=2

for ((i=1; i<=count; i++)); do
  echo "Hello"
  sleep "$interval"
done

Giáº£i thÃ­ch cÃ¡c thÃ nh pháº§n chÃ­nh
- Shebang (#!/usr/bin/env bash)
  Chá»‰ rÃµ shell thá»±c thi script lÃ  Bash (thay vÃ¬ #!/bin/bash cá»‘ Ä‘á»‹nh Ä‘Æ°á»ng dáº«n).

- VÃ²ng láº·p C-style:
	for ((i=1; i<=count; i++)); do
 	 â€¦
	done
- Khá»Ÿi táº¡o biáº¿n i=1;
- Äiá»u kiá»‡n tiáº¿p tá»¥c i<=count;
- Sau má»—i vÃ²ng, i tá»± tÄƒng (i++).
+ echo -> In ra dÃ²ng chá»¯ kÃ¨m newline.

+ sleep -> Táº¡m dá»«ng tiáº¿n trÃ¬nh trong sá»‘ giÃ¢y chá»‰ Ä‘á»‹nh. CÃ³ thá»ƒ dÃ¹ng sá»‘ thá»±c (vÃ­ dá»¥: sleep 0.5).

Má»Ÿ rá»™ng kiáº¿n thá»©c:
- CÃ¡c kiá»ƒu vÃ²ng láº·p trong Bash
	for var in list; do â€¦; done
	while [ condition ]; do â€¦; done
	until [ condition ]; do â€¦; done
- Xá»­ lÃ½ tÃ­n hiá»‡u (trap):
Náº¿u muá»‘n dá»«ng ngay khi ngÆ°á»i dÃ¹ng nháº¥n Ctrl+C, cÃ³ thá»ƒ báº¯t tÃ­n hiá»‡u:
$ trap 'echo "Interrupted"; exit' SIGINT

2) Viáº¿t script Ä‘áº¿m sá»‘ file .txt trong thÆ° má»¥c
Script (count_txt.sh):
#!/usr/bin/env bash

# ThÆ° má»¥c chá»©a cÃ¡c file (máº·c Ä‘á»‹nh lÃ  thÆ° má»¥c hiá»‡n táº¡i)
directory="${1:-.}"

# Äáº¿m file .txt
count=$(find "$directory" -maxdepth 1 -type f -name "*.txt" | wc -l)

echo "Sá»‘ file .txt trong thÆ° má»¥c '$directory': $count"

Giáº£i thÃ­ch cÃ¡c thÃ nh pháº§n chÃ­nh
- Biáº¿n tham sá»‘:
	$ directory="${1:-.}"
- Náº¿u khi cháº¡y truyá»n Ä‘á»‘i sá»‘ $1, dÃ¹ng lÃ m thÆ° má»¥c;
- Náº¿u khÃ´ng cÃ³, máº·c Ä‘á»‹nh lÃ  . (thÆ° má»¥c hiá»‡n táº¡i).

+ find:
-maxdepth 1: chá»‰ tÃ¬m ngay trong thÆ° má»¥c, khÃ´ng Ä‘á»‡ quy xuá»‘ng thÆ° má»¥c con.
-type f: chá»‰ tÃ¬m file (khÃ´ng bao gá»“m thÆ° má»¥c).
-name "*.txt": khá»›p cÃ¡c tÃªn káº¿t thÃºc báº±ng .txt.

+ wc -l
Äáº¿m sá»‘ dÃ²ng Ä‘áº§u vÃ oâ€”tÆ°Æ¡ng á»©ng vá»›i sá»‘ file tÃ¬m Ä‘Æ°á»£c.

Má»Ÿ rá»™ng kiáº¿n thá»©c
- Äá»‡ quy tÃ¬m .txt trong cáº£ cÃ¢y thÆ° má»¥c
  Bá» -maxdepth 1:
$ find "$directory" -type f -name "*.txt" | wc -l
- Bá» qua phÃ¢n biá»‡t chá»¯ hoa/chá»¯ thÆ°á»ng:
$ find "$directory" -type f \( -iname "*.txt" -o -iname "*.TXT" \) | wc -l
- Sá»­ dá»¥ng globbing
Náº¿u chá»‰ cáº§n Ä‘áº¿m file á»Ÿ thÆ° má»¥c hiá»‡n táº¡i vÃ  Bash Ä‘Ã£ báº­t nullglob:
$ shopt -s nullglob
$ files=(*.txt)
$ echo "${#files[@]}"

- shopt -s nullglob: náº¿u khÃ´ng cÃ³ file nÃ o khá»›p, files sáº½ thÃ nh máº£ng rá»—ng (thay vÃ¬ chá»©a literal "*.txt").
- ${#files[@]} tráº£ vá» Ä‘á»™ dÃ i máº£ng.
------------------------------------------
1. Lá»‡nh sleep
Chá»©c nÄƒng: Táº¡m dá»«ng tiáº¿n trÃ¬nh trong má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh.
CÃº phÃ¡p cÆ¡ báº£n:
$ sleep NUMBER[SUFFIX]
- NUMBER cÃ³ thá»ƒ lÃ  sá»‘ nguyÃªn hoáº·c sá»‘ thá»±c (vÃ­ dá»¥ 0.5).
- SUFFIX (tuá»³ chá»n) xÃ¡c Ä‘á»‹nh Ä‘Æ¡n vá»‹:
	- s cho giÃ¢y (máº·c Ä‘á»‹nh, cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng).
	- m cho phÃºt.
	- h cho giá».
	- d cho ngÃ y.
VÃ­ dá»¥:
$ sleep 2       # táº¡m dá»«ng 2 giÃ¢y
$ sleep 0.1     # táº¡m dá»«ng 0.1 giÃ¢y
$ sleep 3m      # táº¡m dá»«ng 3 phÃºt
$ sleep 1h30m   # táº¡m dá»«ng 1 giá» 30 phÃºt

- á»¨ng dá»¥ng thÆ°á»ng gáº·p:
	- GiÃ£n khoáº£ng giá»¯a cÃ¡c láº§n thá»­ káº¿t ná»‘i máº¡ng.
	- Táº¡o delay trong cÃ¡c tiáº¿n trÃ¬nh tá»± Ä‘á»™ng hoÃ¡.
	- Thá»­ nghiá»‡m ká»‹ch báº£n cÃ³ phÃ¢n trang (throttling).

2. CÃ´ng cá»¥ find + wc
+ find
- Chá»©c nÄƒng: TÃ¬m file vÃ  thÆ° má»¥c theo Ä‘iá»u kiá»‡n (tÃªn, loáº¡i, kÃ­ch thÆ°á»›c, thá»i gian sá»­a, v.v.).
- CÃº phÃ¡p:
	$ find [PATH...] [OPTIONS] [ACTIONS]
- Má»™t sá»‘ tuá»³ chá»n quan trá»ng:
	-name PATTERN
	Khá»›p tÃªn theo wildcard (*.txt, file?, v.v.), phÃ¢n biá»‡t chá»¯ hoa/chá»¯ thÆ°á»ng.

	-iname PATTERN
	Giá»‘ng -name nhÆ°ng khÃ´ng phÃ¢n biá»‡t hoa thÆ°á»ng.

	-type [f|d|l]
	f = file thÆ°á»ng, d = directory, l = symbolic link.

	-maxdepth N / -mindepth N
	Giá»›i háº¡n Ä‘á»™ sÃ¢u Ä‘á»‡ quy.

	-mtime N
	File sá»­a Ä‘á»•i cÃ¡ch Ä‘Ã¢y N ngÃ y.

	-size N[cwbkMG]
	KÃ­ch thÆ°á»›c (báº±ng byte, KB, MB, â€¦).

- Actions (thao tÃ¡c trÃªn káº¿t quáº£):

	- Máº·c Ä‘á»‹nh in ra Ä‘Æ°á»ng dáº«n tÃ¬m Ä‘Æ°á»£c.
	-print
	In ra (máº·c Ä‘á»‹nh Ä‘Ã£ in).
	-exec COMMAND {} \;
	Thá»±c thi COMMAND vá»›i tá»«ng file (thay {} báº±ng Ä‘Æ°á»ng dáº«n).
	-delete
	XoÃ¡ file/thÆ° má»¥c tÃ¬m Ä‘Æ°á»£c

VÃ­ dá»¥:
find . -type f -name "*.log" -mtime -7
# tÃ¬m file .log Ä‘Æ°á»£c sá»­a trong 7 ngÃ y gáº§n nháº¥t

find /var/log -type f -name "*.gz" -exec gzip -d {} \;
# giáº£i nÃ©n cÃ¡c file .gz

find . -type f -size +10M
# tÃ¬m file lá»›n hÆ¡n 10 MB

+ wc (word count)
Chá»©c nÄƒng: Äáº¿m sá»‘ dÃ²ng, tá»«, kÃ½ tá»± cá»§a Ä‘áº§u vÃ o.
CÃº phÃ¡p:
$ wc [OPTIONS] [FILE...]
CÃ¡c tuá»³ chá»n chÃ­nh:
	-l: Ä‘áº¿m dÃ²ng.
	-w: Ä‘áº¿m tá»«.
	-c: Ä‘áº¿m byte.
	-m: Ä‘áº¿m kÃ½ tá»± (UTFâ€‘8).
	-L: Ä‘á»™ dÃ i dÃ²ng dÃ i nháº¥t.
- VÃ­ dá»¥:
$ wc -l file.txt
# output: sá»‘ dÃ²ng + tÃªn file

$ find . -type f -name "*.txt" | wc -l
# káº¿t há»£p find + wc Ä‘á»ƒ Ä‘áº¿m file .txt

$wc -w *.md
# Ä‘áº¿m tá»•ng tá»« trong cÃ¡c file Markdown

3. Globbing trong Bash
Globbing: sá»­ dá»¥ng wildcard Ä‘á»ƒ má»Ÿ rá»™ng tÃªn file mÃ  khÃ´ng cáº§n find.
CÃ¡c kÃ½ tá»± Ä‘áº·c biá»‡t:
	- *
	  Khá»›p 0 hoáº·c nhiá»u kÃ½ tá»± (vÃ­ dá»¥: *.sh, data*).

	- ?
	  Khá»›p Ä‘Ãºng 1 kÃ½ tá»± (vÃ­ dá»¥: file?.txt sáº½ khá»›p file1.txt nhÆ°ng khÃ´ng khá»›p file10.txt).

	- [abc]
	  Khá»›p má»™t kÃ½ tá»± trong ngoáº·c (vÃ­ dá»¥: file[12].txt khá»›p file1.txt hoáº·c file2.txt).

	- [a-z], [!0-9]
	  Khá»›p khoáº£ng kÃ½ tá»± hoáº·c phá»§ Ä‘á»‹nh.

- Thiáº¿t láº­p nullglob vÃ  failglob:

	- Máº·c Ä‘á»‹nh náº¿u khÃ´ng cÃ³ file nÃ o khá»›p, pattern sáº½ khÃ´ng thay Ä‘á»•i (vÃ­ dá»¥ *.xyz váº«n lÃ  literal).

	- shopt -s nullglob
  	  Khi báº­t, náº¿u khÃ´ng cÃ³ file nÃ o khá»›p, pattern sáº½ bá»‹ loáº¡i ra (tráº£ vá» máº£ng rá»—ng).

	- shopt -s failglob
	  Khi báº­t, náº¿u khÃ´ng cÃ³ file nÃ o khá»›p, sáº½ bÃ¡o lá»—i vÃ  dá»«ng script.

- VÃ­ dá»¥:
$ shopt -s nullglob
$ files=( *.txt )
$ echo "CÃ³ ${#files[@]} file .txt"

- PhÃ¢n biá»‡t globbing vÃ  regex:
- Globbing chá»‰ Ã¡p dá»¥ng cho tÃªn file vÃ  Ä‘Æ¡n giáº£n hÆ¡n.
- Regular expressions (thÆ°á»ng dÃ¹ng vá»›i grep, [[ â€¦ =~ â€¦ ]]) máº¡nh hÆ¡n nhÆ°ng phá»©c táº¡p hÆ¡n.

***Tá»•ng káº¿t
- sleep: delay trong script, há»— trá»£ giÃ¢y, phÃºt, giá», ngÃ y, sá»‘ thá»±c.
- find + wc: tÃ¬m kiáº¿m file Ä‘a nÄƒng, káº¿t há»£p wc -l Ä‘á»ƒ Ä‘áº¿m káº¿t quáº£.
- Globbing: má»Ÿ rá»™ng tÃªn file nhanh, cáº§n lÆ°u Ã½ nullglob/failglob Ä‘á»ƒ trÃ¡nh nháº§m láº«n khi khÃ´ng cÃ³ file khá»›p.


-------------------------------------------------------
BÃ i táº­p 3. File Permission & Navigation
- Táº¡o thÆ° má»¥c `test`, vÃ o trong Ä‘Ã³, táº¡o 3 file `a.txt`, `b.txt`, `c.txt`. Äá»•i quyá»n thÃ nh chá»‰ Ä‘á»c.
- Ghi láº¡i Ä‘Æ°á»ng dáº«n tuyá»‡t Ä‘á»‘i cá»§a file `b.txt`.

-------------------------------------------------------
BÃ i táº­p 4. Process & System
- Hiá»ƒn thá»‹ 5 tiáº¿n trÃ¬nh sá»­ dá»¥ng nhiá»u CPU nháº¥t.
- Ghi láº¡i má»©c sá»­ dá»¥ng RAM hiá»‡n táº¡i.

-------------------------------------------------------
BÃ i táº­p 5. Performance/Testing Tools
- DÃ¹ng `time` Ä‘á»ƒ Ä‘o thá»i gian cháº¡y script Python Ä‘Æ¡n giáº£n.
- DÃ¹ng `top` Ä‘á»ƒ kiá»ƒm tra má»©c sá»­ dá»¥ng CPU trong 10 giÃ¢y.

-------------------------------------------------------
BÃ i táº­p 6. Bonus: Viáº¿t shell script
- Táº¡o má»™t shell script tÃªn `check_temp.sh` giáº£ láº­p kiá»ƒm tra giÃ¡ trá»‹ nhiá»‡t Ä‘á»™ (random tá»« 30-100). Náº¿u > 70 thÃ¬ in "Warning".
-------------------------------------------------------


























